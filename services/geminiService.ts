// Offline Service Mock
// This service simulates AI responses without network connectivity

export const getAiCoachResponse = async (history: { role: string; parts: { text: string }[] }[], newMessage: string): Promise<string> => {
  // Simulate processing delay
  await new Promise(resolve => setTimeout(resolve, 600));

  return `[وضع غير متصل]
  
مرحباً بك! يعمل النظام حالياً في الوضع غير المتصل لضمان الخصوصية والسرعة.

إليك بعض النصائح العامة بناءً على أفضل الممارسات الرياضية:
1. **الاستمرارية:** الالتزام بالجدول أهم من كثافة التمرين في البداية.
2. **التغذية:** تأكد من تناول البروتين الكافي لاستشفاء العضلات.
3. **النوم:** هو الوقت الذي يبني فيه جسمك العضلات، احرص على 7-9 ساعات.

يمكنني مساعدتك في تتبع تقدمك أو توضيح التمارين المتاحة في المكتبة.`;
};

export const generateTrainingPlan = async (profile: any, goals: string): Promise<string> => {
  await new Promise(resolve => setTimeout(resolve, 1000));
  
  const sport = profile.sport || "اللياقة العامة";
  
  return `## خطة تدريبية مقترحة: ${sport} (وضع محلي)

تم إنشاء هذه الخطة بناءً على القواعد الأساسية لعلم التدريب الرياضي، وهي مصممة للعمل دون اتصال بالإنترنت.

### الملف الشخصي:
- **المستوى:** ${profile.level}
- **الهدف:** ${goals || "تحسين الأداء العام"}

---

### الجدول الأسبوعي المقترح:

#### اليوم 1: قوة وتحمل (الجزء العلوي)
* **إحماء:** 5-10 دقائق (قفز الحبل أو جري في المكان).
* **تمرين 1:** ضغط (Push-ups) - 3 مجموعات × 12 تكرار.
* **تمرين 2:** عقلة (Pull-ups) أو تجديف - 3 مجموعات × 10 تكرارات.
* **تمرين 3:** ضغط الكتف (بوزن الجسم أو دمبل) - 3 مجموعات × 12 تكرار.

#### اليوم 2: كارديو ومرونة
* **النشاط:** مشي سريع، جري، أو ركوب دراجة.
* **المدة:** 30-45 دقيقة بشدة متوسطة.
* **المرونة:** جلسة إطالة كاملة لمدة 15 دقيقة.

#### اليوم 3: قوة (الجزء السفلي)
* **تمرين 1:** قرفصاء (Squats) - 4 مجموعات × 15 تكرار.
* **تمرين 2:** طعن (Lunges) - 3 مجموعات × 12 لكل ساق.
* **تمرين 3:** رفع الساقين (Calf Raises) - 3 مجموعات × 20 تكرار.

#### اليوم 4: راحة نشطة
* مشي خفيف أو يوجا للاستشفاء.

---
**ملاحظة:** تأكد من شرب الماء بانتظام وتوقف فوراً إذا شعرت بألم غير طبيعي.`;
};

export const analyzeTechniqueImage = async (base64Image: string, userQuery: string): Promise<string> => {
  await new Promise(resolve => setTimeout(resolve, 1200));
  
  return `## تحليل الأداء (محاكاة محلية)

تم استلام الصورة بنجاح. في الوضع غير المتصل، لا تتوفر خدمة التحليل العميق عبر السحابة.

**قائمة تحقق ذاتية لتحسين الأداء:**

1. **وضعية الظهر:** هل العمود الفقري في وضع محايد؟ تجنب التقوس المفرط.
2. **الركبتين:** في تمارين الساقين، تأكد أن الركبة لا تتجاوز أطراف الأصابع بشكل مبالغ فيه ولا تنحني للداخل.
3. **الرأس والرقبة:** اجعل نظرك للأمام أو محايداً لتجنب إجهاد الرقبة.
4. **الثبات:** تأكد من ثبات الكعبين على الأرض في تمارين القرفصاء والرفع.

*نصيحة:* يمكنك مقارنة أدائك بالفيديوهات التعليمية المعتمدة للمحترفين.`;
};